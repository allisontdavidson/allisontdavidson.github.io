<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Legends</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Data Visualization</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Intro</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Refinements
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="TitleLabels.html">Title Labels (Big/Outer/Axis)</a>
    </li>
    <li>
      <a href="CatAndNumDisplay.html">Category &amp; Numeric Display</a>
    </li>
    <li>
      <a href="AxisRange.html">Axis Range, Breaks, and Ordering</a>
    </li>
    <li>
      <a href="subsets.html">Subsets</a>
    </li>
    <li>
      <a href="themes.html">Themes</a>
    </li>
    <li>
      <a href="facets.html">Facets</a>
    </li>
    <li>
      <a href="Legends.html">Legends</a>
    </li>
    <li>
      <a href="Annotations.html">Annotations</a>
    </li>
    <li>
      <a href="Position.html">Position Adjustments</a>
    </li>
    <li>
      <a href="SummaryStats.html">Adding Summary Statistics</a>
    </li>
    <li>
      <a href="NonColorAesthetics.html">Adjusting Non-Color Aesthetics</a>
    </li>
    <li>
      <a href="AdjustingColor.html">Adjusting Color</a>
    </li>
    <li>
      <a href="PickingColors.html">Picking Colors &amp; Palettes</a>
    </li>
    <li>
      <a href="Interactivity.html">Interactvity</a>
    </li>
  </ul>
</li>
<li>
  <a href="WranglingDataIntro.html">Wranging Data</a>
</li>
<li>
  <a href="markdown.html">Markdown Help</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Legends</h1>

</div>


<p>There are many things you can do with legends. This chapter of the <a
href="https://ggplot2-book.org/scales-colour">ggplot2</a> book covers
many more ideas than just what is listed below as well as this <a
href="https://viz-ggplot2.rsquaredacademy.com/ggplot2-modify-legend">chapter</a>
from Data Visualization with ggplot2 by Aravind Hebbali. Additionally,
this post from <a
href="https://www.tidyverse.org/blog/2024/02/ggplot2-3-5-0-legends/">Tidyverse</a>
covers many more adjustments to legends.</p>
<div id="adjusting-legend-position" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Adjusting Legend
Position</h1>
<p>One can adjust the overall position of the legend to staple positions
outside the graph or specified coordinates, which may have the legend
within the graph.</p>
<div id="position-legend-outside-graph" class="section level2"
number="1.1">
<h2><span class="header-section-number">1.1</span> Position Legend
Outside Graph</h2>
<p>Use gf_theme(legend.position = “bottom”) to adjust where the legend
goes outside the graph. Choices include: bottom, top, left, or
right.</p>
<p><strong>Example:</strong> gf_theme(legend.position = “bottom”)</p>
<pre class="r"><code>bottom = gf_point(Petal.Length~Petal.Width, data=iris, color = ~Species) %&gt;%
  gf_theme(legend.position = &quot;bottom&quot;) %&gt;%
  gf_labs(title = &quot;Legends at Bottom&quot;)

top = gf_point(Petal.Length~Petal.Width, data=iris, color = ~Species) %&gt;%
  gf_theme(legend.position = &quot;top&quot;) %&gt;%
  gf_labs(title = &quot;Legends at Top&quot;)

grid.arrange(bottom, top, nrow = 1)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="different-positions-outside-graph" class="section level2"
number="1.2">
<h2><span class="header-section-number">1.2</span> Different Positions
Outside Graph</h2>
<p>To place legends in different positions around the graph (e.g. legend
1 on the top and legend 2 on the bottom), specify which legend goes
where within a guides( ) option within the gf_theme layer.</p>
<p><strong>Example:</strong> gf_theme(guides(color =
guide_legend(position = “bottom”), size = guide_legend(position =
“top”)))</p>
<p><strong>Example (justification:</strong>
gf_theme(legend.justification.top = “right”)</p>
<pre class="r"><code>gf_count(cyl~class, data = mpg, color = ~class) %&gt;%
  gf_refine(scale_size(range = c(0.01, 12))) %&gt;%
  gf_labs(title = &quot;Different Positions of Legends&quot;) %&gt;%
  gf_theme(guides(color = guide_legend(position = &quot;bottom&quot;, nrow = 1),
                  size = guide_legend(position = &quot;top&quot;))) %&gt;%
  gf_theme(legend.justification.top = &quot;right&quot;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
</div>
<div id="legend-position-within-graph-coordinates"
class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Legend Position
Within Graph (Coordinates)</h2>
<p>In order to specify a position within the graph one must understand
how R is defining position.</p>
<p>Top left: (0,1)</p>
<p>Bottom right: (1, 0)</p>
<p>Use the legend.position &amp; legend.justification within a gf_theme
layer to specify exactly where you want the legend positioned within
your plot.</p>
<p><strong>Example (position only):</strong> gf_theme(legend.position =
c(0,1))</p>
<p><strong>Example (position &amp; justification):</strong>
gf_theme(legend.position = c(0,1), legend.justification = c(0,1))</p>
<pre class="r"><code>gf_point(Petal.Length~Petal.Width, data=iris, color = ~Species) %&gt;%
  gf_theme(legend.position = c(.8,0.2)) %&gt;%
  gf_labs(title = &quot;Specify Position Only&quot;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<pre class="r"><code>gf_point(Petal.Length~Petal.Width, data=iris, color = ~Species) %&gt;%
  gf_theme(legend.position = c(0,1),
           legend.justification = c(0,1)) %&gt;%
  gf_labs(title = &quot;Specify Position &amp; Justification&quot;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-4-2.png" width="672" /></p>
</div>
</div>
<div id="removing-legends" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Removing Legends</h1>
<p>This section looks at how to suppress some or all legends.<br />
## Remove all Legends</p>
<p>You can remove all legends from a single graph (or layer) using the
show.legend = FALSE option or using gf_theme(legend.position =
“none”)</p>
<p><strong>Example (show.legend):</strong> gf_plot( Y ~ X , data =
Dataset , color = ~Color , show.legend = FALSE)</p>
<p><strong>Example (guides):</strong> gf_theme(legend.position =
“none”)</p>
<pre class="r"><code>gf_count(cyl~class, data = mpg, color = ~class) %&gt;%
  gf_refine(scale_size(range = c(0.01, 12))) %&gt;%
  gf_labs(title = &quot;Show All Legends&quot;) </code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<pre class="r"><code>gf_count(cyl~class, data = mpg, color = ~class, show.legend = FALSE) %&gt;%
  gf_refine(scale_size(range = c(0.01, 12))) %&gt;%
  gf_labs(title = &quot;Remove All Legends: show.legend = FALSE&quot;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-5-2.png" width="672" /></p>
<pre class="r"><code>gf_count(cyl~class, data = mpg, color = ~class) %&gt;%
  gf_refine(scale_size(range = c(0.01, 12))) %&gt;%
  gf_labs(title = &quot;Remove All Legends: legend.position&quot;) %&gt;%
  gf_theme(legend.position = &quot;none&quot;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-5-3.png" width="672" /></p>
<div id="removing-some-legends" class="section level2" number="2.1">
<h2><span class="header-section-number">2.1</span> Removing Some
Legends</h2>
<p>In order to remove just some legends, specify which legend(s) to
remove using the guides(color = FALSE) command in a gf_theme( )
statement.</p>
<p><strong>Example (remove color):</strong> gf_theme(guides(color =
FALSE))</p>
<p><strong>Example (remove size):</strong> gf_theme(guides(size =
FALSE))</p>
<p><strong>Example (remove color &amp; size):</strong>
gf_theme(guides(size = FALSE, color = FALSE))</p>
<pre class="r"><code>gf_count(cyl~class, data = mpg, color = ~class) %&gt;%
  gf_theme(guides(color = FALSE)) %&gt;%
  gf_refine(scale_size(range = c(0.01, 12)))%&gt;%
  gf_labs(title = &quot;Remove Just Color Legend&quot;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<pre class="r"><code>gf_count(cyl~class, data = mpg, color = ~class) %&gt;%
  gf_theme(guides(size = FALSE)) %&gt;%
  gf_refine(scale_size(range = c(0.01, 12)))%&gt;%
  gf_labs(title = &quot;Remove Just Size Legend&quot;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-6-2.png" width="672" /></p>
<pre class="r"><code>gf_count(cyl~class, data = mpg, color = ~class) %&gt;%
  gf_theme(guides(size = FALSE, color = FALSE)) %&gt;%
  gf_refine(scale_size(range = c(0.01, 12)))%&gt;%
  gf_labs(title = &quot;Remove both in guides command&quot;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-6-3.png" width="672" /></p>
</div>
</div>
<div id="orientation-of-legends" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Orientation of
Legends</h1>
<p>Sometimes the default layout of the legend isn’t ideal - or maybe
takes up too much space. This section explores ways to adjust the layout
of the legend.</p>
<div id="reverse-a-legend" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Reverse a legend</h2>
<p>This first example is taken directly from a student collaboration.
They wanted the legend to mirror what was seen in the graph (so order
elements in the same way). There was a lot of adjusting within the
graph, so the default legend didn’t match up. Note the many theme
statements used to get the legend to do what was desired. Sadly, it did
not work to combine theme statements.</p>
<p>To reverse a legend, use guide_legend(reverse = TRUE) or
guide_colorbar(reverse = TRUE)</p>
<p><strong>Example (legend):</strong>
gf_theme(guides(fill=guide_legend(reverse=TRUE)))</p>
<p><strong>Example (colorbar):</strong>
gf_theme(guides(fill=guide_colorbar(reverse=TRUE)))</p>
<pre class="r"><code>gf_bar(Type~., fill = ~DriveTrain , data=Cars93, position = position_fill()) %&gt;%
  gf_labs(x = &quot;Proportion&quot;, y=&quot;Vehicle Segment&quot;,
    title = &quot;Default Legend&quot;) %&gt;%
  gf_refine(scale_fill_brewer( palette=&quot;Oranges&quot;), scale_y_discrete(limits=rev)) %&gt;%
  gf_theme(theme_minimal()) %&gt;%
  gf_theme(legend.position = &#39;bottom&#39;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
<pre class="r"><code>gf_bar(Type~., fill = ~DriveTrain , data=Cars93, position = position_fill()) %&gt;%
  gf_labs(x = &quot;Proportion&quot;, y=&quot;Vehicle Segment&quot;,
    title = &quot;Reverse Legend&quot;) %&gt;%
  gf_refine(scale_fill_brewer( palette=&quot;Oranges&quot;), scale_y_discrete(limits=rev)) %&gt;%
  gf_theme(theme_minimal()) %&gt;%
  gf_theme(legend.position = &#39;bottom&#39;) %&gt;%
  gf_theme(guides(fill=guide_legend(reverse=TRUE)))</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-8-2.png" width="672" /></p>
<p>Colorbars can be reversed as well. Note that in both cases (above
legend case) and the colorbar example below - the values &amp;
categories mapped to each color remain the same - it’s just the order of
the values displayed in the legend that adjust.</p>
<pre class="r"><code>gf_raster(Z~X+Y, data = df.volcano) %&gt;%
  gf_refine(scale_fill_gradient(low = &quot;black&quot;, high = &quot;purple&quot;))  %&gt;%
  gf_theme(theme_void) %&gt;%
  gf_labs(title = &quot;Default Colorbar&quot;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<pre class="r"><code>gf_raster(Z~X+Y, data = df.volcano) %&gt;%
  gf_refine(scale_fill_gradient(low = &quot;black&quot;, high = &quot;purple&quot;))  %&gt;%
  gf_theme(theme_void) %&gt;%
  gf_theme(guides(fill=guide_colorbar(reverse=TRUE))) %&gt;%
  gf_labs(title = &quot;Reverse Colorbar&quot;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-9-2.png" width="672" /></p>
</div>
<div id="horizontal-or-vertical-legends" class="section level2"
number="3.2">
<h2><span class="header-section-number">3.2</span> Horizontal or
Vertical Legends</h2>
<p>To specify a legend to display either horizontal or vertical, specify
the legend.direction within the theme command.</p>
<p><strong>Example:</strong> gf_theme(legend.direction =
“horizontal”)</p>
<pre class="r"><code>gf_point(Petal.Length~Petal.Width, data=iris, color = ~Species) %&gt;%
  gf_theme(legend.position = c(0,1),
           legend.justification = c(0,1)) %&gt;%
  gf_labs(title = &quot;Default Orientation&quot;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<pre class="r"><code>gf_point(Petal.Length~Petal.Width, data=iris, color = ~Species) %&gt;%
  gf_theme(legend.position = c(0,1),
           legend.justification = c(0,1),
           legend.direction = &quot;horizontal&quot;) %&gt;%
  gf_labs(title = &quot;Horizontal Orientation&quot;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-10-2.png" width="672" /></p>
</div>
<div id="specifying-rows-cols-for-a-legend" class="section level2"
number="3.3">
<h2><span class="header-section-number">3.3</span> Specifying Rows &amp;
Cols for a Legend</h2>
<pre class="r"><code>gf_count(cyl~class, data = mpg, color = ~class) %&gt;%
  gf_theme(legend.position = &quot;bottom&quot;) %&gt;%
  gf_theme(guides(size = FALSE)) %&gt;%
  gf_refine(scale_size(range = c(0.01, 12)))%&gt;%
  gf_labs(title = &quot;Default Rows of Legend&quot;) </code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<pre class="r"><code>gf_count(cyl~class, data = mpg, color = ~class) %&gt;%
  gf_theme(legend.position = &quot;bottom&quot;) %&gt;%
  gf_theme(guides(size = FALSE,
           color = guide_legend(nrow = 1))) %&gt;%
  gf_refine(scale_size(range = c(0.01, 12)))%&gt;%
  gf_labs(title = &quot;Adjust Rows of Legend&quot;, subtitle = &quot;nrow = 1&quot;) </code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-11-2.png" width="672" /></p>
</div>
</div>
<div id="legend-labels" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Legend Labels</h1>
<p>To adjust the heading label, you can use the gf_labs( ) layer. We
also have the ability to adjust the labels within a scale or range of
values within the legend.</p>
<div id="adjust-legend-title" class="section level2" number="4.1">
<h2><span class="header-section-number">4.1</span> Adjust Legend
Title</h2>
<p>To adjust the legend title, use gf_labs( ).</p>
<p><strong>Examples:</strong> gf_labs(color = “Color Title”, fill =
“Fill Title”, size = “Size Title”)</p>
<p><strong>Example (split on Multiple Lines):</strong> gf_labs(color =
“Line 1\nLine 2”)</p>
<pre class="r"><code>gf_count(cyl~class, data = mpg, color = ~class) %&gt;%
  gf_refine(scale_size(range = c(0.01, 12))) %&gt;%
  gf_labs(title = &quot;Adjust Legend Lables&quot;, color = &quot;Car\nClass&quot;, size = &quot;How Many&quot;) </code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<div id="position-of-legend-title" class="section level3"
number="4.1.1">
<h3><span class="header-section-number">4.1.1</span> Position of Legend
Title</h3>
<p>If you happen to want to adjust the position of the title of the
legend, you can do so by specifying the legend.title.position (and
subsequently the angle &amp; positioning of that title).</p>
<p><strong>Example:</strong> gf_theme(legend.title.position = “left”,
legend.title = element_text(angle = 90, hjust = 0.5))</p>
<pre class="r"><code>gf_count(cyl~class, data = mpg, color = ~class) %&gt;%
  gf_refine(scale_size(range = c(0.01, 12))) %&gt;%
  gf_labs(title = &quot;Adjust Legend Lables&quot;, color = &quot;CarClass&quot;, size = &quot;How Many&quot;) %&gt;%
  gf_theme(legend.title.position = &quot;left&quot;, legend.title = element_text(angle = 90, hjust = 0.5))</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
</div>
</div>
<div id="adjust-labels-within-legend" class="section level2"
number="4.2">
<h2><span class="header-section-number">4.2</span> Adjust Labels Within
Legend</h2>
<p>To adjust labels and/or scales within a legend - you actually adjust
the scale_*_ within a gf_refine layer. You do need to be careful that
the number of breaks and number of labels match. At times you’ll need to
specify the breaks so that you can be certain of the number of labels
needed.</p>
<div id="adjust-categorical-labels" class="section level3"
number="4.2.1">
<h3><span class="header-section-number">4.2.1</span> Adjust Categorical
Labels</h3>
<p>Adjust labels in a scale_*_discrete( ) statement (where * is the
aesthetic changed, color, fill, size, shape, etc.).</p>
<p><strong>Example:</strong> scale_color_discrete(labels = c(“Label 1”,
“Label 2”, “Label 3”))</p>
<pre class="r"><code>gf_point(flipper_length_mm~bill_length_mm, data = penguins, color = ~species)%&gt;%
  gf_labs(title = &quot;Default Species Labels&quot;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<pre class="r"><code>gf_point(flipper_length_mm~bill_length_mm, data = penguins, color = ~species)%&gt;%
  gf_refine(scale_color_discrete(labels = c(&quot;Small Bill&quot;, &quot;Long Bill&quot;, &quot;Long Flippers&quot;))) %&gt;%
  gf_labs(title = &quot;Adjusted Species Labels&quot;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-14-2.png" width="672" /></p>
<pre class="r"><code>gf_point(flipper_length_mm~bill_length_mm, data = penguins, color = ~species)%&gt;%
  gf_refine(scale_color_manual(values = c(&quot;darkorange&quot;,&quot;purple&quot;,&quot;cyan4&quot;),
                               labels = c(&quot;Small Bill&quot;, &quot;Long Bill&quot;, &quot;Long Flippers&quot;))) %&gt;%
  gf_labs(title = &quot;Adjust Labels &amp; Color&quot;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-14-3.png" width="672" /></p>
</div>
<div id="adjust-categorical-labels-on-numeric-data"
class="section level3" number="4.2.2">
<h3><span class="header-section-number">4.2.2</span> Adjust Categorical
Labels (on Numeric Data)</h3>
<p>Here is an example adding categorical labels to a numeric value.</p>
<p><strong>Example (breaks &amp; labels):</strong></p>
<p>scale_size(range = c(0.01, 12), breaks = c(10,20,30), labels =
c(“Few”, “Some”, “Lots”))</p>
<pre class="r"><code>gf_count(cyl~class, data = mpg, color = ~class) %&gt;%
  gf_refine(scale_size(range = c(0.01, 12),
                       breaks = c(10,20,30),
                       labels = c(&quot;Few&quot;, &quot;Some&quot;, &quot;Lots&quot;))) %&gt;%
  gf_labs(title = &quot;Adjust Legend Lables&quot;, color = &quot;Car\nClass&quot;, size = &quot;How Many&quot;) </code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>Here is another example using calculated breaks from the data
(e.g. max, min, mean).</p>
<pre class="r"><code>above.avg.color = &quot;darkblue&quot;
below.avg.color = &quot;darkorange&quot;
buffer = 1000

gf_point(depth~carat, data=diamonds, color = ~price, alpha = 0.4) %&gt;%
  gf_refine(scale_color_gradient2(low = below.avg.color, 
                                  high = above.avg.color, 
                                  midpoint = mean(~price, data = diamonds),
                                  breaks = c(min(~price, data = diamonds)+buffer,
                                           mean(~price, data = diamonds),
                                           max(~price, data = diamonds)-buffer),
                                  labels = c(&quot;Below Average&quot;, &quot;Average&quot;,  &quot;Above Average&quot;)))</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
</div>
<div id="adjust-numeric-labels" class="section level3" number="4.2.3">
<h3><span class="header-section-number">4.2.3</span> Adjust Numeric
Labels</h3>
<p>The following is an example adjusting the limits of the legend,
missing data color, number of breaks, and label adjustment (using scales
package). Here are some notes on the adjustments:</p>
<p><strong>Range of Values:</strong> limits = c( 0 , 10)</p>
<p><strong>Missing Data Color:</strong> na.value = “color”</p>
<p><strong>Breaks:</strong> n.breaks = 5 or breaks = c(0, 1, 2, 3,
4)</p>
<p><strong>Labels (scales package):</strong> labels =
label_number(scale_cut = cut_short_scale())</p>
<pre class="r"><code>gf_point(depth~carat, data=diamonds, color = ~price) %&gt;%
  gf_refine(scale_color_viridis())</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<pre class="r"><code>gf_point(depth~carat, data=diamonds, color = ~price) %&gt;%
  gf_refine(scale_color_viridis(limits = c(0,20000), 
                                na.value = &quot;white&quot;, 
                                n.breaks = 5, 
                                labels = label_number(scale_cut = cut_short_scale())))</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-17-2.png" width="672" /></p>
</div>
</div>
</div>
<div id="force-create-a-legend" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Force-Create a
Legend</h1>
<p>Sometimes you are not mapping a variable to a specific attribute in
your dataset - but rather specifying an attribute directly (e.g. adding
a reference line to a graph). In this case, you may specify attributes
about that item (e.g. color, shape, linetype) and force-create a
legend.</p>
<p><strong>Example:</strong> gf_plot( Y ~ X , data = Dataset, color =
~“Legend Label”)</p>
<pre class="r"><code>gf_dist(&quot;chisq&quot;, df=5, color=~&quot;df = 5&quot;) %&gt;%
gf_dist(&quot;chisq&quot;, df=10, color=~&quot;df = 10&quot;) %&gt;%
gf_dist(&quot;chisq&quot;, df=20, color=~&quot;df = 20&quot;) %&gt;%
  gf_theme(theme_classic()) %&gt;%
  gf_refine(scale_color_brewer(palette = &quot;Paired&quot;)) %&gt;%
  gf_labs(color = &quot;DF&quot;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
</div>
<div id="other-adjustments-to-legends" class="section level1"
number="6">
<h1><span class="header-section-number">6</span> Other Adjustments to
Legends</h1>
<p>This is a space for miscellaneous other ways to adjust the
legend.</p>
<div id="adjust-barheight" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Adjust barheight</h2>
<p>To adjust the barheight to a specific size, specify the
guide_colorbar within the guide option in the scale_*_ you’re using.</p>
<p><strong>Example:</strong> scale_color_manual( guide =
guide_colorbar(barheight = 10) )</p>
<pre class="r"><code>gf_point(depth~carat, data=diamonds, color = ~price) %&gt;%
  gf_refine(scale_color_viridis(limits = c(0,20000), 
                                na.value = &quot;white&quot;, 
                                n.breaks = 5, 
                                labels = label_number(scale_cut = cut_short_scale()),
                                guide = guide_colorbar(barheight = 10, 
                                                       nbin = 4)))</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>Alternatively, you can have the colorbar span the entire space of
your graph using legend.key.width.</p>
<p><strong>Example (span colorbar):</strong> gf_theme(legend.key.width =
unit(1, “null”))</p>
<pre class="r"><code>gf_point(depth~carat, data=diamonds, color = ~price) %&gt;%
  gf_refine(scale_color_viridis(limits = c(0,20000), 
                                na.value = &quot;white&quot;, 
                                n.breaks = 5, 
                                labels = label_number(scale_cut = cut_short_scale()))) %&gt;%
  gf_theme(legend.position = &quot;bottom&quot;, 
           legend.title.position = &quot;bottom&quot;,
           legend.title = element_text(hjust = 0.5), 
           legend.key.width = unit(1, &quot;null&quot;)) %&gt;%
  gf_labs(color = &quot;New Longer Title Can Be Read with More Space&quot;, title = &quot;Adjust colorbar &amp; legend title&quot;) </code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
</div>
<div id="adjust-the-glyph-icon-used" class="section level2"
number="6.2">
<h2><span class="header-section-number">6.2</span> Adjust the glyph
(icon) used</h2>
<p>This <a
href="https://emilhvitfeldt.com/post/changing-glyph-in-ggplot2/">bloc</a>
post goes over several ways to adjust the small icon used within the
legend.</p>
<pre class="r"><code>gf_line(psavert~date, data = economics, color = ~&quot;savings&quot;, key_glyph = &quot;timeseries&quot;) </code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
</div>
<div id="combining-legends" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> Combining
Legends</h2>
<p>Sometimes you may want to combine legends. I found <a
href="https://forum.posit.co/t/ggplot2-is-it-possible-to-combine-color-fill-and-size-legends/17072">this
post</a> to be helpful in combining both size and color legends into
1.</p>
<p>By default size has the different sized circles as a legend, and
color has a colorbar as a legend. What we essentially want to do is
force color to have the same type of legend as size.</p>
<pre class="r"><code>gf_point(bill_length_mm~bill_depth_mm, data = penguins, color = ~body_mass_g, size = ~body_mass_g, alpha = 0.4) %&gt;%
  gf_labs(title = &quot;Two Separate Legends&quot;, subtitle = &quot;One for Size One for Color&quot;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<pre class="r"><code>gf_point(bill_length_mm~bill_depth_mm, data = penguins, color = ~body_mass_g, size = ~body_mass_g, alpha = 0.4) %&gt;%
  gf_refine(scale_color_continuous(guide = &quot;legend&quot;)) %&gt;%
  gf_labs(title = &quot;Combined Legend&quot;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-22-2.png" width="672" /></p>
<pre class="r"><code>gf_point(bill_length_mm~bill_depth_mm, data = penguins, color = ~body_mass_g, size = ~body_mass_g, alpha = 0.4) %&gt;%
  gf_refine(scale_color_viridis(guide = &quot;legend&quot;)) %&gt;%
  gf_labs(title = &quot;Combined Legend with Different Color Scheme&quot;)</code></pre>
<p><img src="Legends_files/figure-html/unnamed-chunk-22-3.png" width="672" /></p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
