<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Category &amp; Number Display</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/lumen.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Data Visualization</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Refinements
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="TitleLabels.html">Title Labels (Big/Outer/Axis)</a>
    </li>
    <li>
      <a href="CatAndNumDisplay.html">Category &amp; Numeric Display</a>
    </li>
    <li>
      <a href="AxisRange.html">Axis Range, Breaks, and Ordering</a>
    </li>
    <li>
      <a href="subsets.html">Subsets</a>
    </li>
    <li>
      <a href="themes.html">Themes</a>
    </li>
    <li>
      <a href="facets.html">Facets</a>
    </li>
    <li>
      <a href="Legends.html">Legends</a>
    </li>
    <li>
      <a href="Annotations.html">Annotations</a>
    </li>
    <li>
      <a href="Position.html">Position Adjustments</a>
    </li>
    <li>
      <a href="SummaryStats.html">Adding Summary Statistics</a>
    </li>
    <li>
      <a href="NonColorAesthetics.html">Adjusting Non-Color Aesthetics</a>
    </li>
    <li>
      <a href="AdjustingColor.html">Adjusting Color</a>
    </li>
    <li>
      <a href="PickingColors.html">Picking Colors &amp; Palettes</a>
    </li>
    <li>
      <a href="Interactivity.html">Interactvity</a>
    </li>
    <li>
      <a href="Time.html">Time</a>
    </li>
  </ul>
</li>
<li>
  <a href="WranglingDataIntro.html">Wranging Data</a>
</li>
<li>
  <a href="markdown.html">Markdown Help</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Category &amp; Number Display</h1>

</div>


<p>This section will cover adjusting numeric or categorical data values
on axis, legend labels, or panel (facet) labels.</p>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<div id="force-variable-type" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Force Variable
Type</h1>
<p>Sometimes we have data that is technically numeric (e.g. Division I
or Division III listed as 1 or 3) but we really want to treat it like a
category.</p>
<div id="force-numeric-variable-to-be-categorical"
class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Force Numeric
Variable to be Categorical</h2>
<p>To force numeric data to be treated like a category, use as.factor(
).</p>
<p><strong>Example:</strong> gf_boxplot( Rank ~ as.factor(Division),
data = Dataset )</p>
<pre class="r"><code>as.numeric = gf_boxplot(Rank~Division, data = Sports) %&gt;%
  gf_labs(title = &quot;Division as Number&quot;)
as.factor = gf_boxplot(Rank~as.factor(Division), data = Sports) %&gt;%
  gf_labs(title = &quot;Division as Factor&quot;, x = &quot;Division&quot;)

grid.arrange(as.numeric, as.factor, nrow =  1)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
<div id="force-categorical-variable-to-be-numeric"
class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Force Categorical
Variable to be Numeric</h2>
<p>Perhaps we have data stored in dollars (e.g. $257). R will treat this
like a category, but we really want it to be treated as a number. There
are a few ways to do this, but one way is to use as.numeric( ).</p>
<p><strong>Example:</strong> gf_point( as.numeric(Price) ~ SqFt , data =
Dataset )</p>
<pre class="r"><code>factor = gf_point(NewPrice~LandArea, data = AdjustedCountries) %&gt;%
  gf_labs(title = &quot;Price as Factor&quot;, y = &quot;Price&quot;, x = &quot;Land Area&quot;)

numeric = gf_point(as.numeric(NewPrice)~LandArea, data = AdjustedCountries) %&gt;%
  gf_labs(title = &quot;Price as Numeric&quot;, y = &quot;Price&quot;, x = &quot;Land Area&quot;)


grid.arrange(factor, numeric, nrow = 1)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
</div>
<div id="adjust-categorical-labels" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Adjust Categorical
Labels</h1>
<p>The following Sections are specific to adjusting categorical-like
data.</p>
<div id="adjust-labels-not-data-itself" class="section level2"
number="2.1">
<h2><span class="header-section-number">2.1</span> Adjust labels (not
data itself)</h2>
<p>Sometimes we have categorical data stored as numeric and not only do
we want to force R to treat as a factor but we also want to adjust the
labels. For example, Gender is stored as 0 and 1. We want to treat as
factor and make 0 and 1 more clear.</p>
<p>One option is to use scale_x_discrete(labels = c(“0” = “F”, “1” =
“M”)) to adjust the labels given.</p>
<p><strong>Example:</strong> gf_plot( Y ~ X ) %&gt;% gf_refine(
scale_x_discrete(labels = c(“0” = “F”, “1” = “M”)) )</p>
<p>This will adjust what R puts on the x-axis, but it doesn’t actually
make Gender a factor with F and M. R Still treats it as a number. Thus,
we still have to have as.factor(Gender) to get separate boxes.</p>
<pre class="r"><code>no.factor.gender = gf_boxplot(Salary~Gender, data = SalaryGender, width = 0.4, position= position_dodge(.5)) %&gt;%
  gf_labs(x = &quot;Gender&quot;, title = &quot;Using scale_x_discrete Labels&quot;, subtitle = &quot;But still treat Gender as numeric (not ideal)&quot;, caption = &quot;Labels don&#39;t show up unless Gender is discrete&quot;) %&gt;%
  gf_refine(scale_x_discrete(labels = c(&quot;0&quot; = &quot;F&quot;, &quot;1&quot; = &quot;M&quot;))) 

as.factor.gender = gf_boxplot(Salary~as.factor(Gender), data = SalaryGender, width = 0.4, position= position_dodge(.5)) %&gt;%
  gf_labs(x = &quot;Gender&quot;, title = &quot;Using scale_x_discrete Labels&quot;, subtitle = &quot;And treat Gender as categorical (ideal)&quot;) %&gt;%
  gf_refine(scale_x_discrete(labels = c(&quot;0&quot; = &quot;F&quot;, &quot;1&quot; = &quot;M&quot;))) 

grid.arrange(no.factor.gender, as.factor.gender, nrow = 1)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>To adjust multiple labels, adjust your scale_XXX_discrete( )
accordingly. The example below adjusts the x axis and color labels.</p>
<pre class="r"><code>default = gf_boxplot(Salary~as.factor(Gender), data = SalaryGender, color = ~as.factor(PhD), width = 0.4, position= position_dodge(.5)) %&gt;%
  gf_labs(color = &quot;PhD&quot;, x = &quot;Gender&quot;, title = &quot;Default Labels (0 and 1)&quot;) 
  

adjusted = gf_boxplot(Salary~as.factor(Gender), data = SalaryGender, color = ~as.factor(PhD), width = 0.4, position= position_dodge(.5)) %&gt;%
  gf_labs(color = &quot;PhD&quot;, x = &quot;Gender&quot;, title = &quot;Adjust Gender &amp; PhD Labels&quot;) %&gt;%
  gf_refine(
    scale_x_discrete(labels = c(&quot;0&quot; = &quot;Female&quot;, &quot;1&quot; = &quot;Male&quot;)),
    scale_color_discrete(labels = c(&quot;0&quot; = &quot;No PhD&quot;, &quot;1&quot; = &quot;PhD&quot;)),
    coord_cartesian(xlim = c(1,2))) 

grid.arrange(default, adjusted, nrow = 1)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="adjust-labels-by-adjusting-the-data" class="section level2"
number="2.2">
<h2><span class="header-section-number">2.2</span> Adjust labels by
adjusting the data</h2>
<p>Alternatively, we can recode the variable itself. This will allow R
to not only treat Gender as a factor instead of as 0 and 1 but also have
different (more clear) labels.</p>
<p>Note, you need to put the code to adjust your variable
<em>before</em> the code for your graph as R will run these sequentially
when you knit your document.</p>
<pre class="r"><code>SalaryGender$Gender = recode(SalaryGender$Gender, &#39;0&#39; = &quot;Female&quot;, &#39;1&#39; = &quot;Male&quot;)

gf_boxplot(Salary~Gender, data = SalaryGender, width = 0.4, position= position_dodge(.5)) %&gt;%
  gf_labs(color = &quot;PhD&quot;, x = &quot;Gender&quot;, title = &quot;Gender with Labels Adjusted&quot;) </code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
</div>
</div>
<div id="dealing-with-overlapping-labels" class="section level1"
number="3">
<h1><span class="header-section-number">3</span> Dealing with
Overlapping Labels</h1>
<p>Sometimes our categorical labels overlap and make our visuals
unreadable. There are a few things we can do to adjust.</p>
<p>I’m using a made-up-dataset from <a
href="https://stackoverflow.com/questions/41568411/how-to-maintain-size-of-ggplot-with-long-labels/66169251">this</a>
post.</p>
<pre class="r"><code>Labels &lt;- c(&quot;Long label&quot;, &quot;Longer label&quot;, &quot;An even longer label&quot;,
        &quot;A very, very long label&quot;, &quot;An extremely long label&quot;,
        &quot;Long, longer, longest label of all possible labels&quot;, 
        &quot;Another label&quot;, &quot;Short&quot;, &quot;Not so short label&quot;)
LongLabels &lt;- data.frame(Labels, CharCount = nchar(Labels))

gf_col(CharCount~Labels, data = LongLabels) %&gt;%
  gf_labs(y = &quot;Number of Characters in Label&quot;, x = &quot;Really Long Label Names&quot;, title = &quot;Difficulty with Overlapping Labels&quot;)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<div id="make-plot-wider" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Make Plot Wider</h2>
<p>One way to deal with overlapping labels is merely to make the plot
wider. We can do this at the R Chunk level (for a specific plot) or more
globally in the Markdown settings.</p>
<p><strong>R Chunk Level:</strong> adjust {r, fig.width = 10}</p>
<div class="float">
<img src="RChunkFigSize.png" alt="Adjust Figure Size in R Chunk" />
<div class="figcaption">Adjust Figure Size in R Chunk</div>
</div>
<pre class="r"><code>Semi.Long.Labels &lt;- c(&quot;Long label&quot;, &quot;Longer label&quot;, &quot;An even longer label&quot;, &quot;Another label&quot;, &quot;Short&quot;, &quot;Not so short label&quot;)
ShorterLabels &lt;- data.frame(Semi.Long.Labels, CharCount = nchar(Semi.Long.Labels))

gf_col(CharCount~Semi.Long.Labels, data = ShorterLabels) %&gt;%
  gf_labs(y = &quot;Number of Characters in Label&quot;, x = &quot;Really Long Label Names&quot;, title = &quot;Making Figure Wider (in R Chunk)&quot;)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-11-1.png" width="960" /></p>
<p><strong>Globally:</strong> adjust settings in the Markdown
heading</p>
<div class="float">
<img src="GlobalFigureSize2.png" alt="Global Figure Size Adjustments" />
<div class="figcaption">Global Figure Size Adjustments</div>
</div>
</div>
<div id="adjust-orientation-of-graph" class="section level2"
number="3.2">
<h2><span class="header-section-number">3.2</span> Adjust orientation of
graph</h2>
<p>Sometimes readability of our graph is solved by simply adjusting the
orientation of our graph.</p>
<pre class="r"><code>gf_col(Labels~CharCount, data = LongLabels) %&gt;%
  gf_labs(x = &quot;Number of Characters in Label&quot;, y = &quot;Really Long Label Names&quot;, title = &quot;Adjust Orientation of Graph&quot;)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
</div>
<div id="adjust-angle-of-labels" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Adjust Angle of
Labels</h2>
<p>We can also adjust the angle of the labels. This is not as ideal as
it’s harder to read labels that are not horizontal. Ideally, if we can
make horizontal labels, we should do so!</p>
<p>To adjust angle of labels, adjust the theme element. Specify the
angle, and then (possibly) where it starts horizontally (hjust).</p>
<p><strong>Example:</strong> gf_plot( Y ~ X ) %&gt;%
gf_theme(axis.text.x = element_text(angle = 45, hjust = 1))</p>
<pre class="r"><code>gf_col(CharCount~Labels, data = LongLabels) %&gt;%
  gf_labs(y = &quot;&quot;, x = &quot;Really Long Label Names&quot;, title = &quot;Labels at 45 Degree Angle (with hjust)&quot;) %&gt;%
  gf_theme(axis.text.x = element_text(angle = 45, hjust = 1))</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<pre class="r"><code>gf_col(CharCount~Labels, data = LongLabels) %&gt;%
  gf_labs(y = &quot;&quot;, x = &quot;Really Long Label Names&quot;, title = &quot;Labels at 90 Degree Angle (no hjust)&quot;) %&gt;%
  gf_theme(axis.text.x = element_text(angle = 90))</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-13-2.png" width="672" /></p>
</div>
<div id="wrap-text" class="section level2" number="3.4">
<h2><span class="header-section-number">3.4</span> Wrap Text</h2>
<p>Another option is to automatically wrap the text. This is most
helpful if there are spaces between words. If the words themselves are
very long, this option may not work as well.</p>
<p><strong>Option 1:</strong> Use scale_x_discrete(labels =
label_wrap(10)) (from scales package)</p>
<pre class="r"><code>gf_col(CharCount~Labels, data = LongLabels) %&gt;%
  gf_labs(y = &quot;&quot;, x = &quot;Really Long Label Names&quot;, title = &quot;Wrap Labels using label_wrap&quot;, subtitle = &quot;From scales package&quot;) %&gt;%
  gf_refine(scale_x_discrete(labels = label_wrap(10)))</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p><strong>Option 2:</strong> Use str_wrap( VarName ) (from tidyverse
package)</p>
<pre class="r"><code>gf_col(CharCount~str_wrap(Labels, width = 10), data = LongLabels) %&gt;%
  gf_labs(y = &quot;&quot;, x = &quot;Really Long Label Names&quot;, title = &quot;Wrap Labels using str_wrap&quot;, subtitle = &quot;From tidyverse package&quot;)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
</div>
<div id="abbreviate-labels" class="section level2" number="3.5">
<h2><span class="header-section-number">3.5</span> Abbreviate
labels</h2>
<p>There are a few ways we can auto-abbreviate some labels. It should be
noted that the abbreviations are NOT always intuitive - so beware. You
may want to recode manually or try other options.</p>
<p><strong>Default length (4):</strong> scale_x_discrete(labels =
abbreviate)</p>
<p><strong>Specify min length:</strong> scale_x_discrete(labels =
function(x) abbreviate(x, minlength = 1))</p>
<pre class="r"><code>Default.Abb = gf_col(CharCount~Labels, data = LongLabels) %&gt;%
  gf_labs(y = &quot;&quot;, x = &quot;Abbreviated Label Names (Default)&quot;, title = &quot;Abbreviated Labels&quot;, subtitle = &quot;labels = abbreviate&quot;) %&gt;%
  gf_refine(scale_x_discrete(labels = abbreviate))

MinLength.Abb = gf_col(CharCount~Labels, data = LongLabels) %&gt;%
  gf_labs(y = &quot;&quot;, x = &quot;Abbreviated Label Names (Min Length = 1)&quot;, title = &quot;Minlength Abbreviation&quot;, subtitle = &quot;abbreviate(x, minlength = 1)&quot;) %&gt;%
  gf_refine(scale_x_discrete(labels = function(x) abbreviate(x, minlength = 1)))

grid.arrange(Default.Abb, MinLength.Abb, nrow = 2)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
</div>
<div id="dodge-labels" class="section level2" number="3.6">
<h2><span class="header-section-number">3.6</span> Dodge Labels</h2>
<p>We can automatically dodge the labels and make them offset across
multiple rows with the guide_axis(n.dodge = N) function in scale_x_*().
For shorter labels, we can dodge every other row (so n.dodge = 2). For
longer labels you may need to use n.dodge = 3. Note that it may get
difficult to associate the labels appropriately when n.dodge is larger
than 2.</p>
<p><strong>Example:</strong> gf_plot( Y ~ X ) %&gt;%
gf_refine(scale_x_discrete(guide = guide_axis(n.dodge = 2)))</p>
<pre class="r"><code>gf_sina(cty~reorder(manufacturer, displ), data = mpg, alpha = 0.4) %&gt;%
  gf_labs(x = &quot;Manufacturer&quot;, title = &quot;Dodge Lables&quot;, y = &quot;City MPG&quot;, subtitle = &quot;n.dodge = 2&quot;) %&gt;%
  gf_refine(scale_x_discrete(guide = guide_axis(n.dodge = 2))) </code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<pre class="r"><code>gf_col(CharCount~Labels, data = LongLabels) %&gt;%
  gf_refine(scale_x_discrete(guide = guide_axis(n.dodge = 3))) %&gt;% 
  gf_labs(y = &quot;&quot;, x = &quot;&quot;, title = &quot;Dodge Really Long Labels&quot;, subtitle = &quot;n.dodge = 3&quot;)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-17-2.png" width="672" /></p>
<p>Alternatively, one can try wrapping and dodging labels.</p>
<pre class="r"><code>gf_col(CharCount~str_wrap(Labels, width = 10), data = LongLabels) %&gt;%
  gf_refine(scale_x_discrete(guide = guide_axis(n.dodge = 2))) %&gt;% 
  gf_labs(y = &quot;&quot;, x = &quot;&quot;, title = &quot;Dodge and Wrap Labels&quot;, subtitle = &quot;n.dodge = 3, labels width = 10&quot;)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
</div>
<div id="manually-recode-labels" class="section level2" number="3.7">
<h2><span class="header-section-number">3.7</span> Manually Recode
Labels</h2>
<div id="adjust-the-labels-only-in-a-refine-statement."
class="section level3" number="3.7.1">
<h3><span class="header-section-number">3.7.1</span> Adjust the labels
(only) in a refine statement.</h3>
<p><strong>Example:</strong> gf_refine(scale_x_discrete(labels = c( “Old
Label 1” = “New Label 1”, “Old Label 2” = “New Label 2”)))</p>
<pre class="r"><code>gf_col(CharCount~Semi.Long.Labels, data = ShorterLabels) %&gt;%
  gf_labs(y = &quot;&quot;, x = &quot;Labels Changed (But Not Data Itself)&quot;, title = &quot;Manually Adjust the Labels&quot;) %&gt;%
  gf_refine(scale_x_discrete(labels = c(&quot;Long label&quot; = &quot;Long&quot;,
                                        &quot;Longer label&quot; = &quot;Longer&quot;,
                                        &quot;An even longer label&quot; = &quot;Longest&quot;,
                                        &quot;Another label&quot; = &quot;Another&quot;,
                                        &quot;Short&quot; = &quot;Short&quot;,
                                        &quot;Not so short label&quot; = &quot;Not short&quot;)))</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
</div>
<div id="adjust-the-data-itself-using-recode." class="section level3"
number="3.7.2">
<h3><span class="header-section-number">3.7.2</span> Adjust the data
itself using recode.</h3>
<p><strong>Example:</strong> Dataset$Variable = recode( Dataset$Variable
, “Old Label 1” = “New Label 1”, “Old Label 2” = “New Label 2”)</p>
<pre class="r"><code>ShorterLabels$Semi.Long.Labels = recode(ShorterLabels$Semi.Long.Labels,
                                        &quot;Long label&quot; = &quot;Long&quot;,
                                        &quot;Longer label&quot; = &quot;Longer&quot;,
                                        &quot;An even longer label&quot; = &quot;Longest&quot;,
                                        &quot;Another label&quot; = &quot;Another&quot;,
                                        &quot;Short&quot; = &quot;Short&quot;,
                                        &quot;Not so short label&quot; = &quot;Not short&quot;)

gf_col(CharCount~Semi.Long.Labels, data = ShorterLabels) %&gt;%
  gf_labs(y = &quot;&quot;, x = &quot;Recoded Labels (By Changing Data)&quot;, title = &quot;Manually Recode Data&quot;)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
</div>
</div>
<div id="adjust-font-size" class="section level2" number="3.8">
<h2><span class="header-section-number">3.8</span> Adjust Font Size</h2>
<p>This may be less-than-ideal as the font size on the axis is already
relatively small, but as one last suggestion, we could adjust the font
size to help overlapping labels.</p>
<p>theme(axis.text=element_text(size=30))</p>
<p><strong>Example:</strong> gf_plot( Y ~ X ) %&gt;%
gf_theme(axis.text.x=element_text(size=10))</p>
<pre class="r"><code>gf_col(CharCount~Semi.Long.Labels, data = ShorterLabels) %&gt;% gf_theme(axis.text.x=element_text(size=7)) %&gt;%
  gf_labs(y = &quot;&quot;, x = &quot;Long Labels&quot;, title = &quot;Change Axis Text (x) Size&quot;, subtitle = &quot;Size = 7&quot;)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
</div>
</div>
<div id="adjusting-numeric-data" class="section level1" number="4">
<h1><span class="header-section-number">4</span> Adjusting Numeric
Data</h1>
<p>This section explores ways to adjust numeric scale display. This will
largely use the <a href="https://scales.r-lib.org/">scales
package</a>.</p>
<p>To illustrate some ways to adjust numeric data, we’ll start with a
plot (below) that defaults to scientific notation</p>
<pre class="r"><code>gf_point(RandLargeNum~x, data = NumData) %&gt;%
  gf_labs(y = &quot;&quot;, x = &quot;&quot;, title = &quot;Default: Scientific Notation (y-axis)&quot;)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<div id="mathematically-adjust-data" class="section level2"
number="4.1">
<h2><span class="header-section-number">4.1</span> Mathematically Adjust
Data</h2>
<p>One can mathematically adjust the data to take on a slightly
different form. If we do so, we’ll want to adjust our labels accordingly
for better readability.</p>
<p><strong>Example:</strong> gf_plot( Population/1000000 ~
LifeExpectancy, data = Dataset ) %&gt;% gf_labs( y = “Population
(Millions)”)</p>
<pre class="r"><code>gf_point(RandLargeNum/1000000~x, data = NumData) %&gt;%
  gf_labs(y = &quot;Values (Millions)&quot;, x = &quot;&quot;, title = &quot;Mathematically Adjust Large Numbers&quot;)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
</div>
<div id="number-comma-notation" class="section level2" number="4.2">
<h2><span class="header-section-number">4.2</span> Number &amp; Comma
Notation</h2>
<p>You can adjust the default notation and force the scale to be a
number using the <a
href="https://scales.r-lib.org/reference/label_number.html">label_number</a>
command.</p>
<pre class="r"><code>gf_point(RandLargeNum~x, data = NumData) %&gt;%
  gf_refine(scale_y_continuous(labels = label_number())) %&gt;%
  gf_labs(y = &quot;&quot;, x = &quot;&quot;, title = &quot;Adjust y-axis to number notation&quot;, subtitle = &quot;Better than scientific notation, but rather long&quot;)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<p>To specifically add a comma (instead of a space) one can use <a
href="https://scales.r-lib.org/reference/label_number.html">label_comma()</a>.</p>
<p><strong>Example:</strong> gf_refine( scale_y_continuous( labels =
label_comma() ) )</p>
<pre class="r"><code>gf_point(RandLargeNum~x, data = NumData) %&gt;%
  gf_refine(scale_y_continuous(labels = label_comma())) %&gt;%
  gf_labs(y = &quot;&quot;, x = &quot;&quot;, title = &quot;Adjust y-axis to comma notation&quot;, subtitle = &quot;Better than scientific notation, but rather long&quot;)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<p>To adjust the rather long numeric labels, you can adjust the scale
within the label_comma command. Additionally, you can add prefix and
suffix labels.</p>
<pre class="r"><code>gf_point(RandLargeNum~x, data = NumData) %&gt;%
  gf_refine(scale_y_continuous(labels = label_comma(scale = 1/1000000, suffix = &quot;M&quot;, prefix = &quot;$&quot;))) %&gt;%
  gf_labs(y = &quot;&quot;, x = &quot;&quot;, title = &quot;Adjust y-axis to Comma notation&quot;, subtitle = &quot;Also adjust scale, suffix, and prefix&quot;)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p>Another option is scale_cut() option. This can automatically adjust
numbers and add a suffix (e.g. K, M, B). This works particularly well
for log scales. This option works both within label_number and
label_comma.</p>
<p><strong>Example:</strong> gf_refine(scale_y_continuous( labels =
scales::label_number(scale_cut = scales::cut_short_scale())))</p>
<pre class="r"><code>gf_point(RandLargeNum~x, data = NumData) %&gt;%
  gf_refine(scale_y_continuous( labels = scales::label_comma(scale_cut = scales::cut_short_scale()))) %&gt;%
  gf_labs(y = &quot;&quot;, x = &quot;&quot;, title = &quot;cut_short_scale( ) Adjustments&quot;)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
</div>
<div id="adding-or-to-numbers" class="section level2" number="4.3">
<h2><span class="header-section-number">4.3</span> Adding $ or % to
Numbers</h2>
<p>Instead of adding a $ as a prefix within the label_number or
label_comma commands, you can use label_dollar. You can still specify
the scale and suffix even within label_dollar.</p>
<p><strong>Example:</strong> gf_refine(scale_y_continuous( labels =
scales::label_dollar(scale = 1/1000000, suffix = “M”)))</p>
<pre class="r"><code>gf_point(RandLargeNum~x, data = NumData) %&gt;%
  gf_refine(scale_y_continuous( labels = scales::label_dollar(scale = 1/1000000, suffix = &quot;M&quot;))) %&gt;%
  gf_labs(y = &quot;&quot;, x = &quot;&quot;, title = &quot;label_dollar with scale &amp; suffix (y-axis)&quot;)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<p>Additionally, instead of adding a % sign a a suffix, we can use <a
href="https://scales.r-lib.org/reference/label_percent.html">label_percent</a>.</p>
<p><strong>Example:</strong> gf_refine(scale_x_continuous(labels =
label_percent()))</p>
<pre class="r"><code>gf_point(RandLargeNum~x, data = NumData) %&gt;%
  gf_refine(scale_y_continuous( labels = scales::label_dollar(scale = 1/1000000, suffix = &quot;M&quot;)),
            scale_x_continuous(labels = label_percent(scale = 1))) %&gt;%
  gf_labs(y = &quot;&quot;, x = &quot;&quot;, title = &quot;label_dollar (y-axis) and label_percent (x-axis)&quot;)</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
</div>
<div id="other-number-elements" class="section level2" number="4.4">
<h2><span class="header-section-number">4.4</span> Other Number
Elements</h2>
<p>The scales package has many other abilities, described in detail in
the <a
href="https://scales.r-lib.org/reference/index.html">references</a>
page. Some highlights include:</p>
<ul>
<li><a
href="https://scales.r-lib.org/reference/label_bytes.html">label_bytes()</a>
(1kB, 2 MB)</li>
<li><a
href="https://scales.r-lib.org/reference/label_currency.html">label_currencies</a>
($100, €2.50)</li>
<li><a
href="https://scales.r-lib.org/reference/label_ordinal.html">label_ordinal</a>
(1st, 2nd, 3rd, etc)</li>
<li><a
href="https://scales.r-lib.org/reference/label_pvalue.html">label_pvalue</a>
(p &lt;0.001, p = 0.25, p &gt;= 0.99)</li>
<li><a
href="https://scales.r-lib.org/reference/label_scientific.html">label_scientific</a>
(1e05, 1.5e-02)</li>
</ul>
</div>
<div id="categorical-labels-for-numbers" class="section level2"
number="4.5">
<h2><span class="header-section-number">4.5</span> Categorical Labels
for Numbers</h2>
<p>If you’d like to add categorical labels to the numeric values, you
can do so inside the scale_*_continuous command using the labels
option.</p>
<pre class="r"><code>gf_histogram(~price, data = diamonds) %&gt;%
  gf_labs(title = &quot;Adding Labels to Price Breaks&quot;, y = &quot;&quot;, x = &quot;Price Labels&quot;) %&gt;%
  gf_refine(scale_x_continuous(breaks = c(0, 4000, 8000, 12000, 16000),
                               labels = c(&quot;Free&quot;, &quot;Typical&quot;, &quot;Expensive&quot;, &quot;Really\nExpensive&quot;, &quot;Astronomical&quot;)),
            scale_y_continuous(breaks = c(0,7500,15000), minor_breaks = seq(0,20000, by = 2000))) %&gt;%
  gf_theme(theme_minimal())</code></pre>
<p><img src="CatAndNumDisplay_files/figure-html/unnamed-chunk-32-1.png" width="672" /></p>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
